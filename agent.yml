env:
  API_BINDING: "0.0.0.0:2900"

path.data: data
path.logs: log
path.configs: "config"
configs.auto_reload: true

resource_limit.cpu.max_num_of_cpus: 1
resource_limit:
  memory:
    max_in_bytes: 533708800 #50MB

task:
  max_concurrent_tasks: 3

stats:
  include_storage_stats_in_api: false

#TODO
#elastic:
#  skip_init_metadata_on_start: true
#  health_check:
#    enabled: true
#    interval: 60s
#  availability_check:
#    enabled: false
#    interval: 60s

#TODO remove
elastic.elasticsearch: default_ingest_cluster
elasticsearch:
  - name: default_ingest_cluster
    enabled: true
    endpoint: "http://localhost:9200"
elastic:
  enabled: true
  remote_configs: true
  health_check:
    enabled: true
    interval: 30s
  availability_check:
    enabled: true
    interval: 60s
  metadata_refresh:
    enabled: true
    interval: 30s
  cluster_settings_check:
    enabled: true
    interval: 20s
  store:
    enabled: false
  orm:
    enabled: true
    init_template: true
    template_name: ".infini"
    index_prefix: ".infini_"

disk_queue:
  max_msg_size: 20485760
  max_bytes_per_file: 20485760
  max_used_bytes: 524288000
  retention.max_num_of_local_files: 1
  compress:
    idle_threshold: 1
    num_of_files_decompress_ahead: 0
    segment:
      enabled: true

api:
  enabled: true
  network:
    binding: $[[env.API_BINDING]]
#  tls:
#    enabled: true
#    cert_file: /etc/ssl.crt
#    key_file: /etc/ssl.key
#    skip_insecure_verify: false

badger:
  mem_table_size: 1048576
  value_log_max_entries: 1000000
  value_log_file_size: 104857600
  value_threshold: 1024
agent:

configs:
  #for managed client's setting
  managed: true # managed by remote servers
  interval: "1s"
  servers: # config servers
    - "http://localhost:2900"
  max_backup_files: 5

  #for config servers
  manager:
#    local_configs_repo_path: /Users/medcl/go/src/infini.sh/agent/config_repo/
